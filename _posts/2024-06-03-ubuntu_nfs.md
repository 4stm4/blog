---
layout: post
title:  "Настройка NFS (Network File System) хранилища на Ubuntu Server"
date:   2024-06-03 18:18:18 +0500
categories: ubuntu
---

## Настройка NFS (Network File System) хранилища на Ubuntu Server.

NFS (Network File System) - это протокол сетевой файловой системы, который позволяет одному компьютеру (называемому сервером NFS) делиться файлами и папками с другими компьютерами в сети. Вот несколько преимуществ использования NFS:

1) Обмен файлами в сети: NFS обеспечивает простой и удобный способ обмена файлами между компьютерами в сети. Пользователи могут монтировать удаленные директории на своих компьютерах и обращаться к ним как к локальным файлам.

2) Централизованное хранение: NFS позволяет создавать централизованные хранилища файлов, удобные для коллективной работы, общего доступа к данным и обеспечения резервного копирования.

3) Удобство доступа: Пользователи могут легко получать доступ к общим данным и ресурсам, хранящимся на сервере NFS, что облегчает совместную работу и обмен информацией.

4) Эффективное управление ресурсами: NFS позволяет администраторам централизованно управлять правами доступа, контролировать разрешения на файлы и папки, обеспечивая гибкость в управлении данными.

5) Ускоренный доступ к данным: NFS может обеспечить быстрый доступ к данным за счет сетевого доступа с низкими накладными расходами, что особенно важно для приложений, требующих высокой скорости обмена данными.

6) Масштабируемость: NFS позволяет легко масштабировать хранилище и ресурсы путем добавления новых серверов NFS и расширения файловой системы по мере необходимости.
 
#### Шаг 1: Установка необходимых пакетов
Убедитесь, что nfs-kernel-server установлен на вашем сервере. Если он еще не установлен, выполните следующую команду:
```bash
sudo apt update
sudo apt install nfs-kernel-server
```

#### Шаг 2: Настройка экспортируемой директории
Создайте директорию, которую вы планируете экспортировать. Например, создайте /mnt/nfs_share:
```bash
sudo mkdir -p /mnt/nfs_share
```

Задайте нужные разрешения для этой директории:
```bash
sudo chown nobody:nogroup /mnt/nfs_share
sudo chmod 777 /mnt/nfs_share
```

Отредактируйте файл /etc/exports, чтобы указать правила экспорта. Добавьте строку вида:
```plain-text
/mnt/nfs_share *(rw,sync,no_subtree_check)
```
В этом примере * означает доступ для всех клиентов, rw разрешает чтение и запись, sync гарантирует отправку изменений немедленно.

#### Шаг 3: Перезапустите службу NFS и примените изменения
```bash
sudo systemctl restart nfs-kernel-server
```
#### Шаг 4: Настройка файрвола
Если у вас есть файрвол на сервере, убедитесь, что правила для работы NFS-сервера разрешают доступ. Например, для ufw:
```bash
sudo ufw allow from <client_ip> to any port nfs
sudo ufw reload
```
#### Шаг 5: Подключение к NFS из клиента
Теперь с другого компьютера/сервера вы можете подключиться к вашему NFS-серверу. Например, на другом Ubuntu сервере:
```bash
sudo apt update
sudo apt install nfs-common
sudo mount <nfs_server_ip>:/mnt/nfs_share /mnt/nfs_client
```
Готово! Теперь у вас должно работать NFS хранилище на Ubuntu Server без графического интерфейса. Помните, что эти инструкции представляют основные шаги настройки. В зависимости от вашей конфигурации и требований могут потребоваться дополнительные действия или настройки.