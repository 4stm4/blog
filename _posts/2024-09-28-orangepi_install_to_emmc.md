---
layout: post
title:  "Установка ОС на внутреннюю память Orange Pi cm4"
date:   2024-09-28 22:22:22 +0500
categories: ras.pi
---

### Инструкция по форматированию eMMC памяти на Orange Pi и копированию образа на встроенную память:

**Шаг 1: Подготовка памяти**
1. Вставьте eMMC память в ваш Orange Pi.
2. Убедитесь, что у вас есть доступ к консоли или терминалу для выполнения команд.

**Шаг 2: Форматирование eMMC памяти**
1. **Осторожно!** Убедитесь, что выбранное устройство для форматирования правильное, так как все данные на нем будут утеряны. (имя устройства можно узнать командой lsblk)

```bash
sudo fdisk /dev/mmcblk1
```

2. Введите последовательность следующих команд в диалоговом режиме fdisk:
   - `p` (для выведения текущих разделов)
   - `d` (удалить существующие разделы, если они присутствуют)
   - `w` (записать изменения и выйти)

3. Создайте новый раздел:
   ```bash
   sudo fdisk /dev/mmcblk1
   ```

4. Введите следующие команды в диалоговом режиме fdisk:
   - `n` (создать новый раздел)
   - `p` (применить раздел по умолчанию)
   - `w` (сохранить изменения)

**Шаг 3: Копирование образа на eMMC память**
1. Выполните следующую команду для записи образа на eMMC:
   ```bash
   sudo dd if=operation_system.img of=/dev/mmcblk1 bs=1M status=progress conv=fsync
   ```
   - `if=`: входной файл (имя образа)
   - `of=`: выходной файл (eMMC устройство)
   - `bs=1M`: размер блока 1 МБ
   - `status=progress`: отображение прогресса
   - `conv=fsync`: синхронизация отображения

2. Дождитесь окончания процесса копирования. Это может занять некоторое время в зависимости от размера образа и скорости записи eMMC.

**Шаг 4: Завершение**
1. После завершения процесса отключите eMMC память и перезагрузите Orange Pi.
2. Orange Pi должен загрузиться с установленной системой, соответствующей скопированному образу.

**Примечание**: Убедитесь, что правильно выбрано устройство eMMC (в данном случае `/dev/mmcblk1`), чтобы избежать нежелательного удаления данных с основного устройства.
